@using Newtonsoft.Json
@using System.Web
@model SitecoreDev.Strong4Life.web.Models.SearchResults
@*@model SitecoreDev.Strong4Life.web.Models.SearchResults;*@
@*@model IEnumerable<SitecoreDev.Strong4Life.web.Models.SearchModel>*@
@{
    ViewBag.Title = "Search Item";
}

<script src="http://code.jquery.com/jquery-2.1.1.js"></script>
<h2>Search Item</h2>

<div class="form-example">
    <label for="name">Search Item </label>
    <input type="text" name="name" id="searchText" required>
</div>
<br />
<br />

<div class="form-example">
    <button class="favorite styled" type="button" id="searchButton" onclick="location.href='@Url.Action("DoSearch", "Index")?searchItem=' + $('#searchText').val()">
        Search
    </button>
</div>

<!--old code-->
<br />
<h2>Search Results</h2>

<div class="search-results-container">
    @if ((Model == null) || (Model.Results == null))
    {       
    <div class="search-results-item">
    <div class="search-item-title">No results found</div>
</div>
}
else
{
foreach (var item in Model.Results)
{
<div class="search-results-item">
    <div class="search-item-breadcrumb">@item.Title</div>
    <a class="search-item-title" href="@item.SubHeading">@item.SubHeading</a>
    <div class="search-item-body">@item.abtName</div>
    <div class="search-item-body">@item.abtbody</div>

</div>
        }
    }
</ div >



@*<div id="resultsItem1"></div>
    <script src="http://code.jquery.com/jquery-2.1.1.js"></script>
    <script>
    $(document).ready(function () {

        $("#searchButton").click(function (e) {

            e.preventDefault();
            $.ajax({
                type: "GET",
                datatype: "JSON",
                url: "@Url.Action("DoSearch", "Index")",
                contentType: "application/json",
                data: {
                    searchItem: $("#searchText").val()
                },
                success: function (result) {
                   alert('ok');


                    document.getElementById("resultsItem1").innerHTML = "<ul><li>" + result.Results[0].Title + "</li><li>" + result.Results[1].Title + "</li></ul>";
                },
                error: function (result) {
                    alert('error');
                }
            });
        });
    });
    </script>*@
